/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var N=Object.defineProperty;var X=Object.getOwnPropertyDescriptor;var Z=Object.getOwnPropertyNames;var ee=Object.prototype.hasOwnProperty;var te=(i,o)=>{for(var e in o)N(i,e,{get:o[e],enumerable:!0})},se=(i,o,e,s)=>{if(o&&typeof o=="object"||typeof o=="function")for(let t of Z(o))!ee.call(i,t)&&t!==e&&N(i,t,{get:()=>o[t],enumerable:!(s=X(o,t))||s.enumerable});return i};var oe=i=>se(N({},"__esModule",{value:!0}),i);var me={};te(me,{default:()=>M});module.exports=oe(me);var V=require("obsidian");var l=require("obsidian");var p=require("obsidian"),ae="empty",U="bookmarks-caller-styles",c=(i,o)=>{var e;return((e=i==null?void 0:i.internalPlugins)==null?void 0:e.getEnabledPluginById(o))||null},_=async(i,o,e)=>{switch(o.type){case"group":return(0,p.setIcon)(i,"chevron-right");case"folder":return(0,p.setIcon)(i,"folder-closed");case"file":return o.subpath?(0,p.setIcon)(i,o.subpath.slice(0,2)==="#^"?"toy-brick":"heading"):(0,p.setIcon)(i,"file");case"search":return(0,p.setIcon)(i,"search");case"graph":return(0,p.setIcon)(i,"git-fork");case"url":if(e!=null&&e.db){let s=new URL(o.url||"").hostname,t=await e.db.loadIcon(s,o.url||"");if(t){i.createDiv("bc-favicon bs-favicon",a=>a.style.backgroundImage=`url(${t})`);return}}return(0,p.setIcon)(i,"globe-2");default:return}},y=(i,o)=>{var e,s;if(o.title)return o.title;switch(o.type){case"folder":return(e=o.path)!=null?e:"";case"file":{let t=i.vault.getAbstractFileByPath(o.path||"");return t instanceof p.TFile?t.basename:""}case"search":return(s=o.query)!=null?s:"";case"group":case"graph":default:return""}},S=(i,o)=>{let e=i.vault.getAbstractFileByPath(o.path||"");e instanceof p.TFile&&i.workspace.getLeaf(!0).openFile(e,{eState:{subpath:o.subpath}})},T=(i,o,e)=>{var t;let s=i.vault.getAbstractFileByPath((t=o.path)!=null?t:"");s instanceof p.TFolder&&e&&e.revealInFolder(s)},I=(i,o)=>{var e;o&&o.openGlobalSearch((e=i.query)!=null?e:"")},C=async(i,o,e,s)=>{s&&e&&(await i.workspace.getLeaf(!0).setViewState({type:ae,active:!0}),await e.openBookmark(o,"tab"))},v=(i,o)=>{var e;i.url&&(o&&((e=o.options)!=null&&e.openExternalURLs)?o.openUrl(i.url,!0):window.open(i.url,"_blank"))},B=async(i,o,e)=>{let s=e?o:o.filter(t=>t.type==="file");for(let t of s)switch(t.type){case"group":await B(i,t.items||[],e);break;case"file":{let a=i.vault.getAbstractFileByPath(t.path||"");a instanceof p.TFile&&await i.workspace.getLeaf(!0).openFile(a,{eState:{subpath:t.subpath}});break}case"url":v(t,c(i,"webviewer"));break;case"folder":case"search":case"graph":default:break}},$=()=>{let i=document.getElementById(U);i&&document.getElementsByTagName("HEAD")[0].removeChild(i)},Y=i=>{let o=document.createElement("style");ne(o,{type:"text/css",id:U}),document.getElementsByTagName("HEAD")[0].appendChild(o),i.forEach(({selector:s,property:t,value:a})=>{ie(s,`${t}: ${a}`,o)})},ne=(i,o)=>{for(let e in o)i.setAttribute(e,o[e])},ie=(i,o,e)=>{e.textContent+=i+`{${o}}`};var m={openBookmarksCaller:"openBookmarksCaller",searchBookmarks:"searchBookmarks"},re={recursivelyOpen:!0,showFooterButtons:!0,showLegends:!0,focusColor:"#00b4e0",characters:"asdfghjkl;",allBtn:"/",backBtn:"Backspace"},le={structureType:"flat",sortOrder:"original",recursivelyOpen:!0,showFooterButtons:!0,showLegends:!0,focusColor:"#00b4e0"},g={[m.openBookmarksCaller]:re,[m.searchBookmarks]:le},K={flat:"flat",original:"original"},x={original:"original",newer:"newer",older:"older"},E={min:4,max:10},P=5e3,z="Can't assign duplicate characters and shortcut keys.",ce="4 to 10 characters are required.",pe="The key can't be assigned because it's used preferentially by this plugin.",he=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"," ","Enter"],L=class extends l.PluginSettingTab{constructor(e,s){super(e,s);this.isOpen={firstDetails:!1,secondDetails:!1};this.plugin=s}display(){let{containerEl:e}=this;e.empty(),e.addClass("bc-settings");{let s=e.createEl("details","",t=>{t.createEl("summary","",a=>{a.setText('For "Open bookmarks caller" command')})});this.isOpen.firstDetails&&s.setAttr("open",!0),s.addEventListener("toggle",()=>this.isOpen.firstDetails=s.open),this.setForOpenBookmarksCallerCommand(s)}{let s=e.createEl("details","",t=>{t.createEl("summary","",a=>{a.setText('For "Search bookmarks" command')})});this.isOpen.secondDetails&&s.setAttr("open",!0),s.addEventListener("toggle",()=>this.isOpen.secondDetails=s.open),this.setForSearchBookmarksCommand(s)}}updateStyleSheet(e=!1){if($(),e)return;let{openBookmarksCaller:s,searchBookmarks:t}=this.plugin.settings,{focusColor:a}=s,{focusColor:n}=t;Y([{selector:".bc-leaf-name-btn:focus",property:"outline",value:`2px solid ${a}`},{selector:".bookmarks-search-modal .suggestion-item.is-selected",property:"outline",value:`2px solid ${n}`}])}setForOpenBookmarksCallerCommand(e){let s=m.openBookmarksCaller,t=this.plugin.settings[s];new l.Setting(e).setName("Recursively open files under groups").setDesc("When enabled, recursively open files under groups when selected \u201CAll\u201D button.").addToggle(a=>a.setValue(t.recursivelyOpen).onChange(async n=>{t.recursivelyOpen=n,await this.plugin.saveData(this.plugin.settings)})),new l.Setting(e).setName("Show footer buttons").setDesc("When enabled, show footer buttons on modal.").addToggle(a=>a.setValue(t.showFooterButtons).onChange(async n=>{t.showFooterButtons=n,await this.plugin.saveData(this.plugin.settings)})),new l.Setting(e).setName("Show legends").setDesc("When enabled, show legends on modal.").addToggle(a=>a.setValue(t.showLegends).onChange(async n=>{t.showLegends=n,await this.plugin.saveData(this.plugin.settings)})),new l.Setting(e).setName("Color of button frame on focus").setDesc("Choice your favorite color.").addColorPicker(a=>a.setValue(t.focusColor).onChange(async n=>{t.focusColor=n,await this.plugin.saveData(this.plugin.settings),this.updateStyleSheet()})).then(a=>{let n=()=>t.focusColor=g[s].focusColor;this.addResetButton(a,n)}),new l.Setting(e).setName("Characters used for button hints").setDesc(`Enter ${E.min}~${E.max} non-duplicate alphanumeric characters or symbols.`).addText(a=>{let n=t.characters,{allBtn:r,backBtn:u}=t,h=a.setPlaceholder("Enter characters").setValue(t.characters).onChange(async R=>{let{inputEl:H}=h;!this.isDuplicateChars([...R,r,u])&&H.validity.valid?(H.removeClass("bc-setting-is-invalid"),t.characters=R,n=R,await this.plugin.saveSettings()):H.addClass("bc-setting-is-invalid"),this.updateStyleSheet()});return h.inputEl.addEventListener("blur",()=>{this.isDuplicateChars([...h.inputEl.value,r,u])&&(t.characters=n,new l.Notice(z,P)),h.inputEl.validity.valid||(t.characters=n,new l.Notice(ce,P))}),h.inputEl.setAttrs({maxLength:E.max,required:!0,pattern:`[!-~]{${E.min},${E.max}}`}),h}).then(a=>{let n=()=>t.characters=g[s].characters;this.addResetButton(a,n)}),new l.Setting(e).setName("Shortcut key for the \u201CAll\u201D button").setDesc("Assign shortcut key for the \u201CAll\u201D button.").addText(a=>(this.allBtnText=a.setValue(t.allBtn),this.allBtnText.inputEl.setAttr("readonly",""),this.allBtnText.inputEl.addClass("bc-setting-shortcut-key"),this.allBtnText)).then(a=>{let n=()=>t.allBtn=g[s].allBtn;this.addResetButton(a,n)}).addExtraButton(a=>a.setIcon("pencil").setTooltip("Custom shortcut key").onClick(()=>{let n=[...t.characters,t.backBtn];this.onClickShortcutKeyEdit(this.allBtnText,"allBtn",n)})),new l.Setting(e).setName("Shortcut key for the \u201CBack\u201D button").setDesc("Assign shortcut key for the \u201CBack\u201D button.").addText(a=>(this.backBtnText=a.setValue(t.backBtn),this.backBtnText.inputEl.setAttr("readonly",""),this.backBtnText.inputEl.addClass("bc-setting-shortcut-key"),this.backBtnText)).then(a=>{let n=()=>t.backBtn=g[s].backBtn;this.addResetButton(a,n)}).addExtraButton(a=>a.setIcon("pencil").setTooltip("Custom shortcut key").onClick(()=>{let n=[...t.characters,t.backBtn];this.onClickShortcutKeyEdit(this.backBtnText,"backBtn",n)}))}setForSearchBookmarksCommand(e){let s=m.searchBookmarks,t=this.plugin.settings[s];new l.Setting(e).setName("Type of structure in the list view").setDesc('"flat" displays nested groups in a flattened structure. \u201Coriginal" displays the structure as defined in the Bookmarks core plugin.').addDropdown(a=>a.addOptions(K).setValue(t.structureType).onChange(async n=>{t.structureType=n,await this.plugin.saveData(this.plugin.settings),this.display()})).then(a=>{let n=()=>t.structureType=g[s].structureType;this.addResetButton(a,n)}),new l.Setting(e).setName("Sort order").setDesc(`
				"original" is displayed in the order defined by the Bookmarks core plugin. 
				"newer" is displayed in order of newer bookmark's creation time. 
				\u201Colder\u201D is displayed in order of older bookmark's creation time.
			`).addDropdown(a=>a.addOptions(x).setValue(t.sortOrder).onChange(async n=>{t.sortOrder=n,await this.plugin.saveData(this.plugin.settings),this.display()})).then(a=>{let n=()=>t.sortOrder=g[s].sortOrder;this.addResetButton(a,n)}),new l.Setting(e).setName("Recursively open files under groups").setDesc("When enabled, recursively open files under groups when selected \u201CAll\u201D button.").addToggle(a=>a.setValue(t.recursivelyOpen).onChange(async n=>{t.recursivelyOpen=n,await this.plugin.saveData(this.plugin.settings)})),new l.Setting(e).setName("Show footer buttons").setDesc("When enabled, show footer buttons on modal.").addToggle(a=>a.setValue(t.showFooterButtons).onChange(async n=>{t.showFooterButtons=n,await this.plugin.saveData(this.plugin.settings)})),new l.Setting(e).setName("Show legends").setDesc("When enabled, show legends on modal.").addToggle(a=>a.setValue(t.showLegends).onChange(async n=>{t.showLegends=n,await this.plugin.saveData(this.plugin.settings)})),new l.Setting(e).setName("Color of button frame on focus").setDesc("Choice your favorite color.").addColorPicker(a=>a.setValue(t.focusColor).onChange(async n=>{t.focusColor=n,await this.plugin.saveData(this.plugin.settings),this.updateStyleSheet()})).then(a=>{let n=()=>t.focusColor=g[s].focusColor;this.addResetButton(a,n)})}isDuplicateChars(e){return e.some((s,t)=>e.slice(t+1).includes(s))}onClickShortcutKeyEdit(e,s,t){e.inputEl.value="Press shortcut key",e.inputEl.addClass("class","bc-setting-shortcut-key-edit"),e.inputEl.focus();let a=this.plugin.settings[m.openBookmarksCaller][s],n=this.display.bind(this);e.inputEl.addEventListener("keyup",async r=>{this.plugin.settings[m.openBookmarksCaller][s]=r.key,e.setValue(r.key),await this.plugin.saveSettings(),e.inputEl.removeEventListener("blur",n),n()}),e.inputEl.addEventListener("blur",n),e.inputEl.addEventListener("blur",async()=>{this.isDuplicateChars([e.inputEl.value,...t])&&(this.plugin.settings[m.openBookmarksCaller][s]=a,await this.plugin.saveSettings(),new l.Notice(z,P)),he.includes(e.inputEl.value)&&(this.plugin.settings[m.openBookmarksCaller][s]=a,await this.plugin.saveSettings(),new l.Notice(pe,P))})}addResetButton(e,s,t=!0){e.addExtraButton(a=>a.setIcon("reset").setTooltip("Reset to default").onClick(async()=>{s(),await this.plugin.saveSettings(),this.updateStyleSheet(),t&&this.display()}))}};var w=require("obsidian");var j=require("obsidian"),d="bc-tmp-view",O=class extends j.ItemView{constructor(o){super(o)}getViewType(){return d}getDisplayText(){return""}async onOpen(){}async onClose(){}};var q="ArrowUp",J="ArrowDown",G="ArrowLeft",W="ArrowRight",ue=[{keys:"\u2191 | \u2193",description:"Move focus"},{keys:"\u2190 | \u2192",description:"Switch pages"},{keys:"back",description:"Back to parent group"},{keys:"Enter | Space",description:"Open focused item"},{keys:"chars",description:"Quickly open item"},{keys:"all",description:"Open all files in current group"}],f=i=>{var e;return i?`${(e=i.title)!=null?e:i.path}_${i.ctime}`:""},D=class extends w.Modal{constructor(e,s,t){super(e);this._settings=s;this._bookmarksPlugin=t;this._corePlugins={bookmarks:void 0,fileExplorer:void 0,globalSearch:void 0,graph:void 0,webViewer:void 0};this._chars=[];this._currentLayerItems=[];this._histories=[];this._buttonMap=new Map;this._pagePosition=0;this._focusPosition=0;this._groups=["."];this._chars=[...this.modalSettings.characters],this._currentLayerItems=this._bookmarksPlugin.items,this._histories.push({items:this._currentLayerItems,pagePosition:0,focusPosition:0}),this._corePlugins={bookmarks:this._bookmarksPlugin,fileExplorer:c(this.app,"file-explorer"),globalSearch:c(this.app,"global-search"),graph:c(this.app,"graph"),webViewer:c(this.app,"webviewer")}}get viewItems(){return this._currentLayerItems.slice(this._pagePosition*this._chars.length,this._chars.length+this._pagePosition*this._chars.length)}get modalSettings(){return this._settings.openBookmarksCaller}onOpen(){this.modalEl.addClasses(["bookmarks-caller-modal","bc-modal"]),this.generateHeader(this.contentEl),this._buttonsViewEl=this.contentEl.createDiv("bc-buttons-view"),this.generateContent(this._buttonsViewEl),this.generateFooter(this.contentEl),this._eventListenerFunc=this.handlingKeyupEvent.bind(this),window.addEventListener("keyup",this._eventListenerFunc)}onClose(){window.removeEventListener("keyup",this._eventListenerFunc),this.contentEl.empty()}generateHeader(e){e.createDiv("bc-header",s=>{this._headerTextEl=s.createSpan(""),this.updateHeaderText()})}async generateContent(e,s=0,t=0){var a;e.empty(),this._focusPosition=t,this._pagePosition=s,this.viewItems.length?(await this.generateButtons(e),this.generateDummyButtons(e),(a=this._buttonMap.get(f(this.viewItems.at(t))))==null||a.focus(),this.updateHeaderText()):e.createSpan().setText("No items found in this group.")}async generateButtons(e){for(let[s,t]of this.viewItems.entries()){let a=e.createDiv("bc-leaf-row"),n=a.createEl("button",{text:this._chars.at(s)});n.setAttr("tabIndex",-1),n.addClass("bc-shortcut-btn"),n.addEventListener("click",()=>this.clickItemButton(t,s));let r=a.createEl("button");r.addClass("bc-leaf-name-btn"),r.addEventListener("click",()=>this.clickItemButton(t,s)),await _(r,t,this._corePlugins.webViewer);let u=y(this.app,t);r.createSpan("bc-leaf-name").setText(u||""),this._buttonMap.set(f(t),r)}}generateDummyButtons(e){let s=this._chars.length-this.viewItems.length;for(let t=0;t<s;t++)e.createDiv("bc-leaf-row bc-leaf-row-invisible",a=>{let n=a.createEl("button");n.addClass("bc-leaf-name-btn"),n.setAttr("disabled",!0),n.createSpan("bc-leaf-name").setText("-")})}generateFooter(e){var s;(s=this._footerEl)==null||s.empty(),this.viewItems.length&&(this._footerEl=e.createDiv("bc-footer",t=>{this.modalSettings.showFooterButtons&&t.createDiv("bc-page-nav",a=>{let n=a.createEl("button");if((0,w.setIcon)(n,"undo-2"),n.createSpan("").setText("Back"),n.setAttr("tabIndex",-1),n.addClass("bc-nav-btn"),n.addEventListener("click",()=>this.backToParentLayer()),this._currentLayerItems.length>this._chars.length){let u=a.createEl("button",{text:"\u2190"});u.setAttr("tabIndex",-1),u.addClass("bc-nav-btn"),u.addEventListener("click",()=>this.keyupArrowKeys(G));let h=a.createEl("button",{text:"\u2192"});h.setAttr("tabIndex",-1),h.addClass("bc-nav-btn"),h.addEventListener("click",()=>this.keyupArrowKeys(W))}let r=a.createEl("button");(0,w.setIcon)(r,"square-stack"),r.createSpan("").setText("All"),r.setAttr("tabIndex",-1),r.addClass("bc-nav-btn"),r.addEventListener("click",()=>this.openAllFiles(this._currentLayerItems))}),this.modalSettings.showLegends&&ue.forEach(a=>{t.createDiv("bc-legend",n=>{let r=a.keys;r==="all"&&(r=this.modalSettings.allBtn),r==="back"&&(r=this.modalSettings.backBtn),r==="chars"&&(r=`${this._chars.slice(0,2).join(" | ")} | ... | ${this._chars.slice(-2).join(" | ")}`),n.createSpan("bc-keys").setText(r),n.createSpan("bc-description").setText(a.description)})})}))}updateHeaderText(){let e=this._groups.length===1?`${this._groups.at(0)}/`:`.../${this._groups.at(-1)}/`;this._headerTextEl.setText(e)}async clickItemButton(e,s){switch(e.type){case"group":{this.openBookmarkOfGroup(e,s);break}case"file":{S(this.app,e),this.close();break}case"folder":{T(this.app,e,this._corePlugins.fileExplorer),this.close();break}case"search":{I(e,this._corePlugins.globalSearch),this.close();break}case"graph":{await C(this.app,e,this._corePlugins.bookmarks,this._corePlugins.graph),this.close();break}case"url":{v(e,this._corePlugins.webViewer),this.close();break}default:break}}openBookmarkOfGroup(e,s){let t=this._histories.at(-1);t.pagePosition=this._pagePosition,t.focusPosition=s,this._currentLayerItems=e.items||[],this._groups.push(`${e.title}`),this._histories.push({items:this._currentLayerItems,pagePosition:0,focusPosition:0}),this.generateContent(this._buttonsViewEl),this.generateFooter(this.contentEl)}handlingKeyupEvent(e){if(this._chars.includes(e.key)){this.keyupShortcutKeys(e.key),e.preventDefault();return}if([q,J,G,W].includes(e.key)){this.keyupArrowKeys(e.key),e.preventDefault();return}if(e.key===this.modalSettings.backBtn){this.backToParentLayer(),e.preventDefault();return}if(e.key===this.modalSettings.allBtn){this.openAllFiles(this._currentLayerItems),e.preventDefault();return}}keyupShortcutKeys(e){var a;let s=this._chars.indexOf(e),t=this.viewItems.at(s);(a=this._buttonMap.get(f(t)))==null||a.click()}keyupArrowKeys(e){switch(e){case q:this._focusPosition===0?(this._buttonMap.get(f(this.viewItems.at(-1))).focus(),this._focusPosition=this.viewItems.length-1):(this._buttonMap.get(f(this.viewItems[this._focusPosition-1])).focus(),this._focusPosition-=1);break;case J:this._focusPosition===this.viewItems.length-1?(this._buttonMap.get(f(this.viewItems.at(0))).focus(),this._focusPosition=0):(this._buttonMap.get(f(this.viewItems[this._focusPosition+1])).focus(),this._focusPosition+=1);break;case G:{let s=this._currentLayerItems.length/this._chars.length;if(Math.ceil(s)===1)break;this._pagePosition===0?this._pagePosition=this._currentLayerItems.length%this._chars.length===0?Math.floor(s)-1:Math.floor(s):this._pagePosition-=1,this.generateContent(this._buttonsViewEl,this._pagePosition);break}case W:{let s=this._currentLayerItems.length/this._chars.length;if(Math.ceil(s)===1)break;let t=this._currentLayerItems.length%this._chars.length===0?s-1:Math.floor(s);this._pagePosition===t?this._pagePosition=0:this._pagePosition+=1,this.generateContent(this._buttonsViewEl,this._pagePosition);break}default:break}}backToParentLayer(){if(this._histories.length>1){this._groups.pop(),this._histories.pop();let{items:e,pagePosition:s,focusPosition:t}=this._histories.at(-1);this._currentLayerItems=e,this.generateContent(this._buttonsViewEl,s,t),this.generateFooter(this.contentEl)}}async openAllFiles(e,s=!0){s&&await this.app.workspace.getLeaf(!0).setViewState({type:d});let t=this.modalSettings.recursivelyOpen;await B(this.app,e,t),s&&(this.app.workspace.detachLeavesOfType(d),this.close())}};var k=require("obsidian");var A={all:"Enter",back:"Backspace"},de=[{keys:"\u2191 | \u2193",description:"Move focus"},{keys:"back",description:"Back to parent group"},{keys:"Enter",description:"Open focused item"},{keys:"all",description:"Open all files in current group"}],ge=i=>(o,e)=>i?e.ctime-o.ctime:o.ctime-e.ctime,F=class i extends k.FuzzySuggestModal{constructor(e,s,t,a,n=[]){super(e);this._settings=s;this._bookmarksPlugin=t;this._bookmarks=a;this._upperLayers=n;this._currentLayerItems=[];this._corePlugins={bookmarks:void 0,fileExplorer:void 0,globalSearch:void 0,graph:void 0,webViewer:void 0};let r=structuredClone(this._bookmarks),u=this.modalSettings.structureType===K.original?r:this.convertToFlatStructure(r),h=this.modalSettings.sortOrder;this._bookmarks=h===x.original?u:u.sort(ge(h===x.newer)),this._currentLayerItems=this._bookmarks,this._corePlugins={bookmarks:this._bookmarksPlugin,fileExplorer:c(this.app,"file-explorer"),globalSearch:c(this.app,"global-search"),graph:c(this.app,"graph"),webViewer:c(this.app,"webviewer")},this.setPlaceholder("Search bookmarks"),this._eventListenerFunc=this.handlingKeyupEvent.bind(this),window.addEventListener("keyup",this._eventListenerFunc),this.generateFooter(this.modalEl),this.modalEl.addClasses(["bookmarks-search-modal","bs-modal"])}get modalSettings(){return this._settings.searchBookmarks}onClose(){window.removeEventListener("keyup",this._eventListenerFunc)}getItems(){return this._currentLayerItems}getItemText(e){return y(this.app,e)}generateFooter(e){e.createDiv("bs-footer",s=>{if(this.modalSettings.showFooterButtons&&s.createDiv("bs-button",t=>{let a=t.createEl("button");(0,k.setIcon)(a,"undo-2"),a.createSpan("").setText("Back"),a.setAttr("tabIndex",-1),a.addClass("bs-btn"),a.addEventListener("click",()=>this.backToParentLayer());let n=t.createEl("button");(0,k.setIcon)(n,"square-stack"),n.createSpan("").setText("All"),n.setAttr("tabIndex",-1),n.addClass("bs-btn"),n.addEventListener("click",()=>this.openAllFiles(this._currentLayerItems))}),this.modalSettings.showLegends){let t=k.Platform.isMacOS||k.Platform.isIosApp?"\u21E7":"Shift + ";de.forEach(a=>{s.createDiv("bs-legend",n=>{let r=a.keys;r==="all"&&(r=`${t}${A.all}`),r==="back"&&(r=`${t}${A.back}`),n.createSpan("bs-keys").setText(r),n.createSpan("bs-description").setText(a.description)})})}})}async onChooseItem(e){switch(e.type){case"group":{this.openBookmarkOfGroup(e);break}case"file":{S(this.app,e);break}case"folder":{T(this.app,e,this._corePlugins.fileExplorer);break}case"search":{I(e,this._corePlugins.globalSearch);break}case"graph":{await C(this.app,e,this._corePlugins.bookmarks,this._corePlugins.graph);break}case"url":{v(e,this._corePlugins.webViewer),this.close();break}default:break}}async renderSuggestion(e,s){let t=e.item;return await _(s,t,this._corePlugins.webViewer),s.createSpan("",a=>a.setText(y(this.app,t))),s}openBookmarkOfGroup(e){if(this._corePlugins.bookmarks){let s=e.items||[],t=[...this._upperLayers,s];new i(this.app,this._settings,this._corePlugins.bookmarks,s,t).open()}}convertToFlatStructure(e){let s=[];return e.forEach(t=>{s.push(t),t.type==="group"&&s.push(...this.convertToFlatStructure(t.items||[]))}),s}handlingKeyupEvent(e){if(e.key===A.back&&e.shiftKey){this.backToParentLayer(),e.preventDefault();return}if(e.key===A.all&&e.shiftKey){this.openAllFiles(this._currentLayerItems),e.preventDefault();return}}backToParentLayer(){if(!(this._upperLayers.length<=1)&&this._corePlugins.bookmarks){this._upperLayers.pop();let e=this._upperLayers.at(-1)||[];new i(this.app,this._settings,this._corePlugins.bookmarks,e,this._upperLayers).open(),this.close()}}async openAllFiles(e,s=!0){s&&await this.app.workspace.getLeaf(!0).setViewState({type:d});let t=this.modalSettings.recursivelyOpen&&this.modalSettings.structureType==="original";await B(this.app,e,t),s&&(this.app.workspace.detachLeavesOfType(d),this.close())}};var Q=require("obsidian"),b=class extends Q.Modal{constructor(o){super(o)}onOpen(){this.modalEl.addClasses(["bookmarks-message-modal","bm-modal"]);let o=this.contentEl.createDiv("bm-contents"),e=o.createDiv("bm-content");e.createSpan().setText("This plugin needs bookmarks plugin, but bookmarks plugin is disabled."),e.createSpan().setText("You can enable bookmarks plugin under `Settings` \u2192 `Core plugins` \u2192 `Bookmarks`.");let s=o.createDiv("bm-content");s.createSpan().setText("Please check the following page for bookmarks.");let t=s.createEl("a"),a="https://help.obsidian.md/Plugins/Bookmarks";t.setText(a),t.setAttr("href",a)}onClose(){this.contentEl.empty()}};var M=class extends V.Plugin{async onload(){await this.loadSettings(),this.registerView(d,o=>new O(o)),this.addRibbonIcon("bookmark","Open bookmarks caller",()=>this.openBookmarksCallerModal()),this.addRibbonIcon("bookmark-check","Search bookmarks",()=>this.openBookmarksSearcherModal()),this.addCommand({id:"open-bookmarks-caller",name:"Open bookmarks caller",callback:()=>this.openBookmarksCallerModal()}),this.addCommand({id:"search-bookmarks",name:"Search bookmarks",callback:()=>this.openBookmarksSearcherModal()}),this.addCommand({id:"copy-bookmarks-json",name:"Copy bookmarks.json to clipboard",callback:()=>this.copyBookmarksJson()}),this._settingTab=new L(this.app,this),this.addSettingTab(this._settingTab),this._settingTab.updateStyleSheet()}onunload(){this._settingTab.updateStyleSheet(!0),this.app.workspace.detachLeavesOfType(d)}async loadSettings(){this.settings=Object.assign({},g,await this.loadData()),this.migrateSettingValues()}async saveSettings(){await this.saveData(this.settings)}openBookmarksCallerModal(){let o=c(this.app,"bookmarks");o?new D(this.app,this.settings,o).open():new b(this.app).open()}openBookmarksSearcherModal(){let o=c(this.app,"bookmarks");if(o){let e=o.items;new F(this.app,this.settings,o,e,[e]).open()}else new b(this.app).open()}copyBookmarksJson(){let o=c(this.app,"bookmarks");if(o){if(navigator.clipboard){let e=JSON.stringify({items:o.items});navigator.clipboard.writeText(e).then(()=>new V.Notice("Copied bookmarks.json to clipboard."))}}else new b(this.app).open()}async migrateSettingValues(){let o=this.settings;typeof o.recursivelyOpen=="boolean"&&(this.settings.openBookmarksCaller.recursivelyOpen=o.recursivelyOpen,delete o.recursivelyOpen),typeof o.showFooterButtons=="boolean"&&(this.settings.openBookmarksCaller.showFooterButtons=o.showFooterButtons,delete o.showFooterButtons),typeof o.showLegends=="boolean"&&(this.settings.openBookmarksCaller.showLegends=o.showLegends,delete o.showLegends),typeof o.focusColor=="string"&&(this.settings.openBookmarksCaller.focusColor=o.focusColor,delete o.focusColor),typeof o.characters=="string"&&(this.settings.openBookmarksCaller.characters=o.characters,delete o.characters),typeof o.allBtn=="string"&&(this.settings.openBookmarksCaller.allBtn=o.allBtn,delete o.allBtn),typeof o.backBtn=="string"&&(this.settings.openBookmarksCaller.backBtn=o.backBtn,delete o.backBtn),await this.saveSettings()}};

/* nosourcemap */